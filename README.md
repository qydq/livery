
**Table of Contents**  *generated with [sunst0069] Engilish  China(https://zhihu.com/people/qydq)*

# **androidå¿«é€Ÿé›†æˆåŸºç¡€æ¡†æ¶ - Livery```1.2.18```**

[![Apache-2.0](http://img.shields.io/badge/license-Apache2.0-brightgreen.svg?style=flat)](https://github.com/qydq/alidd-sample/blob/main/LICENSE)
[![Download](https://api.bintray.com/packages/qydq/maven/livery/images/download.svg)](https://bintray.com/qydq/maven/livery/_latestVersion)
[![JCenter](https://img.shields.io/badge/%20JCenter%20-1.2.18-5bc0de.svg)](https://bintray.com/qydq/maven/livery/_latestVersion)
![@sunst](https://avatars0.githubusercontent.com/u/20716264?s=60&u=ec068ee954f943483fbf1516803dcd5b77520ad3&v=4)

[![MinSdk](https://img.shields.io/badge/%20MinSdk%20-%2021%2B%20-f0ad4e.svg)](https://android-arsenal.com/api?level=21)
[![Release Version](https://img.shields.io/badge/release-1.2.18-red.svg)](https://github.com/qydq/small-video-record/releases)
[![](https://img.shields.io/badge/Author-sunst-blue.svg)](https://www.zhihu.com/people/qydq)

[***ä¸­æ–‡APIå¸®åŠ©æ–‡æ¡£1.2ä¸‹è½½`å¯†ç :xeq0`)***](https://pan.baidu.com/s/1yczO3lh4p8Njc_rdb9Fe5g) ä¸€æ¬¾é’ˆå¯¹Androidå¹³å°ä¸‹å¿«é€Ÿé›†æˆ**ä¾¿æ·å¼€å‘**æ¡†æ¶```livery```ï¼Œå¸®åŠ©å¼€å‘è€…**æ¶æ„ä¼ä¸šçº§**åº”ç”¨.

åŸºäºan-baseä»“åº“([**`åŸanæ¡†æ¶`**](https://github.com/qydq/an-aw-base))ä¸[**`livery1.1.x`**](https://github.com/qydq/livery/blob/main/old_livery_1.1.x.md)ç‰ˆæœ¬æ¼”åŒ–è€Œæ¥ï¼Œé’ˆå¯¹æ­¤åšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œå½“å‰ä¼˜åŒ–åæœ€æ–°ä½“ç§¯ä»…æœ‰586KB.
![](https://github.com/qydq/livery/blob/main/image/livery_size.png?raw=true)

**âš ï¸æ³¨æ„**

>* `Liveryç‰ˆæœ¬`1.2.x`ä¸`1.1.xä¸å®Œå…¨å…¼å®¹ï¼Œç”±`1.1.x`å‡çº§åˆ°`1.2.x`å‚è€ƒ[**`å‡çº§æŒ‡å—`**](https://github.com/qydq/livery/blob/main/guide_version.md).
>* `Livery`éµå¾ª`å…è´¹å¼€æºåè®®`ï¼Œä½ å¯ä»¥åœ¨æ­¤`LICENSE`ä¸‹ä½¿ç”¨ï¼Œå€Ÿé‰´ä¿®æ”¹ï¼Œå¦‚æœèƒ½å¤Ÿå¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œé‚£çœŸæ˜¯ä¸‡å¹¸.
>* å¦‚æœä¸æ»¡æ„è¯·å‹å¥½æå‡ºï¼Œæ³¨æ˜é”™è¯¯çš„è¯¦ç»†ä¿¡æ¯æˆ–ä¿®æ”¹å»ºè®®ï¼Œå¥½çš„æƒ³æ³•äº¦å¯ç›´æ¥æäº¤è‡³repoï¼›å¦‚æœä½ è§‰å¾—å®åœ¨æ˜¯æ²¡ç”¨ï¼Œä¹Ÿè¯·ä½ åšä¸€ä¸ªæœ‰è‡ªæˆ‘ä¿®å…»çš„äºº.
>* `Livery`ä¸€ç›´ç»´æŠ¤ï¼Œæœ‰é—®é¢˜æ[**`issues`**](https://github.com/qydq/livery/issues)ï¼ˆæˆ–åœ¨[**`çŸ¥ä¹Bgwan`**](https://www.zhihu.com/people/qydq)ä¸Šç»™æˆ‘ç•™è¨€ï¼Œ**é—®é¢˜æè¿°æ¸…æ¥š**å°±è¡Œ]ï¼Œä¸€èˆ¬ä¿®å¤å¥½å‘¨7å½“æ™šæ›´æ–°.

`2021-04-16)`å½“å‰liveryæœ€æ–°ç‰ˆæœ¬ä¸º[![](https://api.bintray.com/packages/qydq/maven/livery/images/download.svg)](https://bintray.com/qydq/maven/livery/_latestVersion)ï¼Œå»ºè®®ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ã€‚æŸ¥çœ‹[**`æ—§ç‰ˆæœ¬æ—¥å¿—`**](#%E7%89%88%E6%9C%AC%E6%97%A5%E5%BF%97-version-log)ä¹Ÿå¯ä»¥äº†è§£åˆ°liveryçš„ä½¿ç”¨æ–¹æ³•.


[**æˆ‘çš„å”¯ä¸€çŸ¥ä¹åœ°å€.**](https://www.zhihu.com/people/qydq/columns)&#8194;&#8194;&#8194;&#8194;&#8194;&#8194;&#8194;ï¼ˆæ„Ÿè°¢å…³æ³¨ğŸ™ï¼‰

ä¸“æ³¨äºç‰©è”ç½‘é¢†åŸŸï¼Œä¸–ç•Œçš„é€šä¿¡æ ‡å‡†ä»ä»Šå¼€å§‹æ”¹å˜ï¼Œæ‰‹æœºä¹Ÿå¯ä»¥æ˜¯è·¯ç”±å™¨ï¼ŒæˆåŠŸäºè§†é¢‘ç›´æ’­ï¼Œæ ‡å‡†å¹¶ä¸ä¸€å®šæ˜¯Http/sï¼Œä¹Ÿå¯ä»¥æ˜¯Bluetooth.


## **æƒ…æ™¯èƒ½åŠ›# Ability**

```livery```ä¸€è·¯èµ°æ¥ç»å†äº†å¾ˆå¤šç‰ˆæœ¬ï¼Œç°åœ¨æ˜¯ä¸€ä¸ªéå¸¸æˆç†Ÿçš„`ç¨³å®šç‰ˆæœ¬`ï¼›å®ƒåŒ…å«ä¸€äº›éå¸¸å®ç”¨çš„èƒ½åŠ›å’Œä¸€äº›æŠ€å·§ï¼Œ ç”¨ç®€æ´å‹å¥½çš„æ–¹å¼ï¼ŒåŠ©åŠ›ä¾¿æ·å¼€å‘ï¼›ä»¥ä¸‹åˆ—ä¸¾å½“å‰æ”¯æŒçš„èƒ½åŠ›fuction.<br/>

### 1ï¼šæ ¸å¿ƒèƒ½åŠ›
- [x] å›½é™…åŒ–å¤šè¯­è¨€ï¼ˆ**æ¶æ„ä¼ä¸šçº§**åº”ç”¨ï¼‰.
- [x] ä¸»é¢˜åˆ‡æ¢ï¼ˆå¤œé—´æ¨¡å¼ï¼‰.
- [x] åŸºç¡€ç±»ï¼Œå¦‚ï¼šAli/Parallaxï¼ˆ`Activity/Fragment`ï¼‰ã€Baseï¼ˆ`Presenter/View`ï¼‰.
- [x] ç½‘ç»œè¯·æ±‚ï¼ˆâ˜€ï¸ InternetClientæ•´åˆè‡ª`Retrofit+RxJava`ï¼‰.
- [x] æ–‡ä»¶ä¸‹è½½ï¼ˆâ˜€ï¸ DownloaderAsyncTaskç»“åˆ`RxAndroid`ä¸`InternetClient`ï¼‰.
- [x] å›¾åº“é€‰æ‹©ï¼ˆâ˜€ï¸ [**`PictureSelector`**](https://github.com/LuckSiege/_PictureSelector_)å¹¶æ•´åˆåŸTakePhotoæ¨¡å—ï¼Œè§†é¢‘é¢„è§ˆå›¾MediaHelperï¼‰.
- [x] StrictMode APIç¦ æƒé™ä¾¿æ·ç”³è¯·.
### 2ï¼šå¯é€‰èƒ½åŠ›
- [x] å¿«é€Ÿé›†æˆä½ çš„å¯¼èˆªæ å·¥å…· .
- [x] INAç³»åˆ—æ§ä»¶ç›¸å…³ï¼Œå¦‚æ ‡é¢˜æ ï¼ŒçŠ¶æ€è§†å›¾.
- [x] æ¼«å¤©é£ç¾½å¼¹å¹•ä½¿ï¼ˆâ˜€ï¸ Bç«™æœ‰äº†ä¸€ä¸ªçƒˆç„°å¼¹å¹•ä½¿ã€è¿™é‡Œå‘½åä¸ºï¼š`æ¼«å¤©é£ç¾½`ï¼‰.
- [x] ```LA```ç³»åˆ—å®ç”¨èƒ½åŠ›é›†ï¼Œå¦‚MD5/AESåŠ å¯†ï¼Œæ—¥å¿—ï¼Œå±å¹•å°ºå¯¸ï¼Œæ¨¡ç³Šç®—æ³•.
- [x] å·¥å…·ç±»ä»¥åŠæœåŠ¡ï¼Œæ•°æ®æ ¡éªŒï¼Œå°ºå¯¸ï¼Œå›¾ç‰‡å¤„ç†ï¼Œç½‘ç»œ.
- [x] GIFå›¾ç‰‡æ•ˆç‡æ›´å‹å¥½ï¼ˆGifImageViewå¯ä»¥æ›´å¿«çš„åŠ è½½Gifï¼Œæ•ˆç‡å¯å¯¹æ¯”ä¹‹å‰INAPowerImageViewï¼‰.
- [x] Glideå›¾ç‰‡åŠ è½½å¼•æ“GlideEngineï¼ˆâ˜€ï¸ Glideç‰ˆæœ¬ä¸ºï¼š4.10.0ï¼‰.
- [ ] æ­£åœ¨å¼€å‘ing...æ™ºèƒ½è¯­éŸ³å”¤é†’ç›‘å¬èƒ½åŠ›ï¼ˆä¸–ç•Œä¸Šæœ€ç¾çš„å°±æ˜¯å£°éŸ³Voice ï¼‰.

&#8194;&#8194;&#8194;&#8194;&#8194;[**æœ€æ–°ä½“éªŒæ‰«æäºŒç»´ç ä¸‹è½½hong1.2.18.apk**](https://github.com/qydq/livery/blob/main/demo/demo_livery.apk)&#8194;&#8194;&#8194;&#8194;

![](https://github.com/qydq/livery/blob/main/image/qr_demo.png?raw=true)

## **é›†æˆæ–¹å¼# Binaries**

é›†æˆæ–¹å¼æœ‰ä¸‰ç§  ï¼Œé›†æˆä¹‹å‰ï¼Œå…ˆåœ¨ä½ é¡¹ç›®çš„æ ¹ç›®å½•`build.gradle`æ–‡ä»¶`allprojectsâ†’repositories`å±æ€§ä¸‹åŠ å…¥è¿œç¨‹åº“åœ°å€.
```groovy
repositories {
        google()//é¡ºåº1
//        jcenter() // Warning: this repository is going to shut down soon in 2022/02/01
        maven { url 'https://jitpack.io' }//é¡ºåº2
        mavenCentral()//é¡ºåº3
        maven { url 'https://maven.aliyun.com/repository/releases' }//å¯é€‰é¡ºåº4
    }
```
**âš ï¸æ³¨æ„**
>ç”±äº[**`JcenteræœåŠ¡å³å°†å…³é—­`**](https://zhuanlan.zhihu.com/p/363156372)ï¼Œè¯·æŒ‰ç…§ä»¥ä¸Šè¿œç¨‹åº“çš„é¡ºåºé…ç½®.
### 1.(å»ºè®®)é€šè¿‡mavené›†æˆ
åœ¨ä½ é¡¹ç›®`ï¼ˆapp moduleï¼‰`çš„**`build.gradle`**ä¸­æ·»åŠ ï¼ˆè‡´è°¢JitPackå’Œsonatypeï¼‰.
```Groovy
dependencies {
  implementation'com.github.qydq:livery:1.2.18'
}
```
### 2.(ä¸å†å»ºè®®)é€šè¿‡JCenteré›†æˆ
åœ¨ä½ é¡¹ç›®`ï¼ˆapp moduleï¼‰`çš„**`build.gradle`**ä¸­æ·»åŠ ï¼ˆæ„Ÿè°¢Jcenterï¼‰.

```Groovy
dependencies {
  implementation'com.sunsta.livery:livery:1.2.18'
}
```

### 3.(å¯é€‰)æ‰‹åŠ¨é›†æˆ
[***ä¸‹è½½Liveryæœ€æ–°ç‰ˆæœ¬1.2.18`å¯†ç :srrh`)***](https://pan.baidu.com/s/1ttAB7Zp3fHvzlEXzsgUEug)ï¼Œç„¶åå°†`AAR`æ‹·è´åˆ°libsç›®å½•ä¸­æ·»åŠ å¼•ç”¨å…³ç³».

```Groovy
dependencies {
  implementation(name:'livery1.2.18', ext:'aar')
}
```

## **ä½¿ç”¨æ­¥éª¤# Use Step**

### ï¼ˆå¯é€‰ï¼‰ç¬¬1æ­¥ï¼šé…ç½®ä¸»Application

ä½¿ç”¨`ç½‘ç»œè¯·æ±‚`ï¼Œåœ¨ä½ çš„`XxxApplication`ä¸­ç»§æ‰¿`AnApplication`ï¼Œç„¶ååœ¨`onCreate()`æ–¹æ³•ä¸­è°ƒç”¨å¦‚ä¸‹ä»£ç 
```java
public class XxxApplication extends AnApplication {
  @Override
  public void onCreate() {
        super.onCreate();
        Livery.instance().initialze("BASE_URL");
        Livery.instance().enableLog(DEBUG,"LOGFILTER);//å½“é…ç½®è¯¥å†…å®¹æ—¶å€™ï¼Œä¼šæ‰“å°Liveryå…³é”®å»ºè®®ä¿¡æ¯
  }
```
**âš ï¸æ³¨æ„**
> `BASE_URL`æ˜¯ç¬¦åˆRetrofitçš„ç½‘ç»œè¯·æ±‚åœ°å€ï¼Œå¦‚ï¼š`https://api.github.com/`ï¼Œéœ€è¦ä»¥`/`ç»“å°¾ï¼Œæœ€åæŠŠ`XxxApplication`æ·»åŠ åˆ°`AndroidManifest.xml`ä¸­.

### ç¬¬2æ­¥ï¼šé…ç½®AndroidManifest.xml

åœ¨é›†æˆ```livery```æ—¶ï¼Œä¸€èˆ¬éœ€è¦åˆå¹¶AndroidManifestï¼Œå¦åˆ™å¯èƒ½é€ æˆå†²çª.

```xml
<application
  android:name="com.livery.demo.XxxApplication"
  android:allowBackup="true"
  android:icon="@drawable/hong"
  android:label="@string/app_name"
  android:requestLegacyExternalStorage="true"
  android:roundIcon="@drawable/hong"
  android:supportsRtl="true"
  android:theme="@style/ParallaxAppTheme"
  tools:replace="android:theme,android:name">
```
**âš ï¸æ³¨æ„**
> å»ºè®®ç»§æ‰¿æ‰©å±•liveryä¸­çš„ç±»å’Œä¸»é¢˜ï¼Œä¸ç„¶æœ‰çš„ç‰¹æ€§ï¼Œå¦‚å¤œé—´æ¨¡å¼ï¼Œç½‘ç»œæˆ–ä¸å¯ç”¨.

## **æ¨¡å—ä»‹ç»# Details Module**

è¿™é‡Œ```Details Module```ä»‹ç»**éƒ¨åˆ†**æƒ…æ™¯èƒ½åŠ›`(æ ¸å¿ƒï¼Œå¯é€‰ï¼ŒDEMOæ¼”ç¤º)`çš„ä½¿ç”¨æ–¹æ³•ï¼Œæ›´å¤š```liveryæƒ…æ™¯```å¯ä»¥æŸ¥çœ‹**ä¸­æ–‡APIå¸®åŠ©æ–‡æ¡£1.2**ï¼Œæˆ–åœ¨æœ¬äººçŸ¥ä¹[**`anæƒ…æ™¯ä¸“æ `**](https://www.zhihu.com/column/sunst)ä¸­è·å–.
![](https://github.com/qydq/livery/blob/main/image/livery_api.png?raw=true)


**âš ï¸æ³¨æ„**
> * ```hong1.2.apk```ä¸ºæä¾›çš„å®‰è£…åŒ…(å¯ä»¥æ‰«æå‰é¢çš„äºŒç»´ç ä¸‹è½½)ï¼Œ```kaiyan.apk```ä¸ºliveryç»“åˆMVVMå¼€å‘çš„å®‰è£…åŒ…ï¼Œå·²å…±äº«åˆ°```ç©å®‰å“```ç½‘ç«™ï¼Œè¿™é‡Œä¹Ÿå¯ä¸‹è½½ï¼›```hong_picture.apk```ä¸ºPictureSelectoräºŒæ¬¡ç¼–è¯‘ä»¥åçš„å›¾ç‰‡é€‰æ‹©æ¡†æ¶.
> * å°½é‡å°‘çš„ä¾èµ–å…¶å®ƒåº“æ¥å®Œæˆè¿™ä¸ªdemoï¼Œä½¿ç”¨åŸç”Ÿçš„ç³»ç»Ÿçš„ç»„ä»¶å’Œæœ¬liveryæ¡†æ¶æä¾›çš„éƒ¨åˆ†

### 1.æ ¸å¿ƒæƒ…æ™¯èƒ½åŠ›æ¼”ç¤º

#### æ ¸å¿ƒä¸»çª—å£ç±»

**Activity**

```java
public class MainActivity extends AliActivity {
    @Override
    protected void initView(Bundle savedInstanceState) {
        setContentView(R.layout.activity_main);
    }

    //ï¼ˆæ™ºèƒ½è¯­éŸ³æ­£åœ¨å¼€å‘ingï¼‰
/*    @Override
    public void onVoice(String type, String words) {}*/
}
```

**Fragment**

```java
public class MainFragment extends AliFragment {
    private static final String ARG_PARAM1 = "param1";
    private String mParam1;

    private Button mButton;
    public MainFragment() {}

    public static MainFragment newInstance(String param1) {
        MainFragment fragment = new MainFragment();
        Bundle args = new Bundle();
        args.putString(ARG_PARAM1, param1);
        fragment.setArguments(args);
        return fragment;
    }
    @Override
    public int getLayoutId() {
        return R.layout.fragment_main;
    }

    @Override
    public void init(Bundle savedInstanceState) {
        if (getArguments() != null) {
            mParam1 = getArguments().getString(ARG_PARAM1);
        }
        mButton = view.findViewById(R.id.button);
    }
}
```
**âš ï¸æ³¨æ„**

>* `savedInstanceState:Bundle`è¡¨ç¤ºæ­¤ç•Œé¢ä¿å­˜çš„æ•°æ®ï¼Œå¦‚æŸæŸçŠ¶æ€ï¼Œå†å²è®°å½•.
>* AliActivityå¯ä»¥ç›´æ¥æ›¿æ¢ä¸ºï¼šParallaxActivityè¡¨ç¤ºæ­¤ç•Œé¢å¯ä»¥`å³æ»‘`è¿”å›ä¸Šä¸ªçª—å£.
>* AliFragmentå¯ä»¥æ›¿æ¢ä¸ºï¼šParallaxFragmentè¡¨ç¤ºå¯åŠ¨æ‡’åŠ è½½ï¼Œè¿™é‡Œéœ€è¦å°†`init(Bundle)`æ–¹æ³•ä¿®æ”¹ä¸ºlazyInit(Bundle).

#### ç½‘ç»œè¯·æ±‚

ä»¥Github Apiè¯·æ±‚qydqç¤ºä¾‹ï¼šhttps://api.github.com/users/qydq?page=1&per_page=50

è¿”å›çš„jsonæ•°æ®ä¸ºï¼š
```json
{
  "login": "qydq",
  "id": 20716264,
  "node_id": "MDQ6VXNlcjIwNzE2MjY0",
  "avatar_url": "https://avatars.githubusercontent.com/u/20716264?v=4",
  "url": "https://api.github.com/users/qydq",
  "html_url": "https://github.com/qydq",
  "name": "æ™´é›¨è¡æ°”",
  "company": "qydq",
  "blog": "https://zhihu.com/people/qydq",
  "location": "SiChuan Of ChengDu from China",
  "bio": "anæƒ…æ™¯ç³»åˆ—Livery Androidä½œè€…ï¼Œè½¯ä»¶å¼€å‘å·¥ç¨‹å¸ˆï¼Œè‡´åŠ›äºç‰©è”ç½‘ï¼Œäººå·¥æ™ºèƒ½ç ”ç©¶"
}
```

**ç¬¬1æ­¥ï¼šå®šä¹‰ä¸€ä¸ªå®ä½“ç±»`ReplyGithubUserMode.java`**
```java
public class ReplyGithubUserMode implements Serializable {
    private static final long serialVersionUID = -4362168516197876328L;
    private int id;
    private String login;
    private String node_id;
    private String avatar_url;
    private String url;
    private String html_url;
    private String name;
    private String company;
    private String blog;
    private String location;
    private String bio;

    //getXX and setXX method
    ...
}
```
**ç¬¬2æ­¥ï¼šåˆ›å»ºæ ¼å¼ï¼ˆ[`å…·ä½“æ ¼å¼ç‚¹å‡»å‚è€ƒ`](https://zhuanlan.zhihu.com/p/141592512)ï¼‰ä¸ºrxJavaçš„ç½‘ç»œè¯·æ±‚æ¥å£ï¼ˆè¿™é‡Œå‘½åä¸ºHongApiï¼‰**
```java
public interface HongApi {
    @GET("users/qydq")
    Observable<ReplyGithubUserMode> get_observable_github_user(@QueryMap Map<String, Object> params);

    @Headers("BaseUrl:javaBase")
    @FormUrlEncoded
    @POST("users/qydq/hong/aliyun/lifangfang/query_video")
    Observable<ReplyGithubUserMode> post_observable_query_video(@FieldMap Map<String, Object> params);
}
```
**ç¬¬3æ­¥ï¼šåˆ›å»ºä¸€ä¸ªç½‘ç»œå®ç°**
```
public class HongApiImpl {
    /**
     * ï¼ˆå»ºè®®ï¼‰ç½‘ç»œè¯·æ±‚å®ç°æ¥å£1 : é»˜è®¤å«`BASE_URL="https://api.github.com/"`çš„è¯·æ±‚åŸŸ
  */
    public static HongApi api() {
        return InternetClient.getInstance().getRetrofit().create(HongApi.class);
    }
    /**
     * ï¼ˆä¸å»ºè®®ï¼‰ç½‘ç»œè¯·æ±‚å®ç°æ¥å£2 : ä¸åŒ…å«è¯·æ±‚åœ°å€ï¼šhttps://api.github.com/
     */
    public static HongApi api(String currentBaseUrl) {
        return InternetClient.getInstance().getRetrofit(currentBaseUrl).create(HongApi.class);
    }
```
**âš ï¸æ³¨æ„**
> å»ºè®®åœ¨XxxApplicationé…ç½®è¯·æ±‚åŸŸï¼Œ`InternetClient`ä¸ºLiveryæä¾›çš„ç½‘ç»œè¯·æ±‚æ ¸å¿ƒ.

**ç¬¬4æ­¥ï¼šè¯·æ±‚ç½‘ç»œ**

è¿™é‡Œä»¥GETè¯·æ±‚ç¤ºä¾‹ï¼Œè°ƒç”¨ä¸Šé¢`get_observable_github_user()`æ–¹æ³•ï¼ˆè°ƒç”¨POSTè¯·æ±‚ç±»ä¼¼ï¼Œå‚è€ƒ`ç¬¬2æ­¥`å®šä¹‰çš„æ¥å£ï¼Œä½¿ç”¨æœ¬æ¡ˆä¾‹ç›´æ¥è°ƒç”¨`post_observable_query_video()`æ–¹æ³•ï¼‰ï¼Œå…ˆæ¨¡æ‹Ÿè¯·æ±‚å‚æ•°ï¼Œå¦‚ä¸‹å‚è€ƒï¼š

```java
Map<String, Object> params = new HashMap<>();
params.put("page", 1);
params.put("per_page", 50);
```

åœ¨Ali/Parallaxï¼ˆ`Activity/Fragment`ï¼‰ç›´æ¥è°ƒç”¨addDispose()æ–¹æ³•è¯·æ±‚ç½‘ç»œ

```java
addDispose(HongApiImpl.api().get_observable_github_user(params)
        .compose(Convert.io_main())
        .subscribe(new Consumer<ReplyGithubUserMode>() {
            @Override
            public void accept(ReplyGithubUserMode reply) throws Exception {
                if (reply != null) {
                    LaLog.d("hong----è¯·æ±‚æˆåŠŸ:\n" + reply.toString())
                    //tvContent.setText(printResult);
                } else {
                    showToast("æˆåŠŸï¼Œä½†æ•°æ®ä¸ºç©º");
                }
            }
        }));
```

åœ¨å…¶å®ƒä»»ä½•åœ°æ–¹ä¹Ÿå¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•

```java
InternetClient.getInstance().addDispose(HongApiImpl.api().get_observable_github_user(params)
        .compose(Convert.io_main())
        .subscribe(new Consumer<ReplyGithubUserMode>() {
            @Override
            public void accept(ReplyGithubUserMode reply) throws Exception {
                if (reply != null) {
                    LaLog.d("hong----è¯·æ±‚æˆåŠŸ:\n" + reply.toString())
                } else {
                    showToast("æˆåŠŸï¼Œä½†æ•°æ®ä¸ºç©º");
                }
            }
        }));
```
å¦‚æœ**ç¡®å®šéœ€è¦**æ•è·å¼‚å¸¸ä¿¡æ¯ï¼ˆå¦‚`è¿æ¥è¶…æ—¶`ï¼Œ`500`ï¼Œ`400`ï¼Œ`JSONè§£æå¼‚å¸¸`ï¼‰ï¼Œåœ¨`addDispose()`æ–¹æ³•ä¸­åŠ å…¥`InternetException`ç›‘å¬æ¥å£è¯·æ±‚å¤±è´¥çš„åœºæ™¯
```java
addDispose(HongApiImpl.api().get_observable_github_user(params)
        .compose(Convert.io_main())
        .subscribe(new Consumer<ReplyGithubUserMode>() {
            @Override
            public void accept(ReplyGithubUserMode reply) throws Exception {
                if (reply != null) {
                    LaLog.d("hong----è¯·æ±‚æˆåŠŸ:\n" + reply.toString())
                } else {
                    showToast("æˆåŠŸï¼Œä½†æ•°æ®ä¸ºç©º");
                }
            }
        }, new InternetException() {
            @Override
            public void onError(int code, String message) {
                LaLog.e("hong----è¯·æ±‚æ•°æ®å¤±è´¥-æœåŠ¡å™¨å¼‚å¸¸other:message=\n" + message + "code=" + code);
            }
        }));
```

#### æ–‡ä»¶ä¸‹è½½

æ ¸å¿ƒæ˜¯DownloaderAsyncTaskç»“åˆ`RxAndroid`ä¸`InternetClient`ï¼Œæ”¯æŒ**æ–­ç‚¹ç»­ä¼ **ï¼ˆé»˜è®¤å¼€å¯ï¼‰ï¼Œå•ä¸ª\å¤šä¸ª**æ–‡ä»¶ä¸‹è½½**ï¼Œæš‚åœ\å–æ¶ˆï¼Œæ•°æ®åº“çŠ¶æ€æŒä¹…åŒ–ï¼Œä¸‹è½½å®Œæˆé€šçŸ¥æé†’ï¼ˆå¯é€‰ï¼‰ï¼Œæ”¯æŒapkæ–‡ä»¶è‡ªåŠ¨å®‰è£….

è¿™é‡Œä»¥åŒæ—¶ä¸‹è½½livery1.2.18.aarå’Œlivery1.2.18doc.zipæ–‡ä»¶ç¤ºä¾‹

**ç¬¬1æ­¥ï¼šå®šä¹‰ä¸€ä¸ªä¸‹è½½çš„æ–¹æ³•`preDownload()`å‡†å¤‡ä¸‹è½½**

```java
/*
 * 1.å…ˆåˆ¤æ–­ç½‘ç»œæ˜¯å¦å¯ç”¨ï¼Œæ˜¯å¦ä¸ºWIFIï¼ˆè¿™é‡Œç§»åŠ¨ç½‘ç»œä¸å¯ä¸‹è½½ï¼‰
  * 2.ä¸‹è½½ä¹‹å‰å…ˆæ ¹æ®ä¸‹è½½æ–‡ä»¶çš„idæŸ¥æ‰¾ä¸Šæ¬¡ä¸‹è½½çš„ä¿¡æ¯ï¼ˆè¿™é‡Œï¼Œå¦‚æœå·²ç»ä¸‹è½½`(ä¸‹è½½å®Œæˆ)`è¿‡åˆ™ä¸ä¼šå†æ¬¡ä¸‹è½½ï¼Œå¦‚æœæ˜¯æ„å¤–æ–­æ‰ä¹Ÿå¯ä»¥è·å¾—ä¹‹å‰ä¸‹è½½çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚è¿›åº¦69%ï¼‰
  * 3.å¦‚æœdownloaderä¸ºnullï¼Œåˆ™æ˜¯ä¸€ä¸ªæ–°ä¸‹è½½
  * */
private void preDownload(int id, String url) {
    if (NetBroadcastReceiverUtils.isConnectedToInternet(mContext)) {
        if (!NetBroadcastReceiverUtils.isMobileConnected(mContext)) {
            try {
                ResponseDownloader downloader = InternetClient.getInstance().queryDownloadWithId(id);
                if (downloader != null) {
                    if (downloader.getFinished() == 1) {
                        LaLog.d("hong--id=" + id + "çš„æ–‡ä»¶å·²å­˜åœ¨ï¼Œè·¯å¾„ä¸ºï¼š" + downloader.getDownloadPath());
                    } else {
                        LaLog.d("hong--id=" + id + "çš„æ–‡ä»¶ä¸Šæ¬¡ä¸‹è½½è¿›åº¦ä¸ºï¼š" + downloader.getProgress());
                        download(id, url);
                    }
                } else {
                    download(id, url);
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        } else {
            LaLog.d("hong--å½“å‰ä¸ºç§»åŠ¨ç½‘ç»œï¼Œè¯·åˆ‡æ¢è‡³WIFIå†ä¸‹è½½");
        }
    } else {
        LaLog.d("hong--æ— ç½‘ç»œè¿æ¥");
    }
}

private void download(int id, String url) {
    if (!TextUtils.isEmpty(url)) {
        DataService.getInstance().reUrlAvailable(url, new DataService.AvailableListener() {
            @Override
            public void available(String availableUrl) {
                ResponseDownloader downloadMode = new ResponseDownloader(id, availableUrl);
                InternetClient.getInstance().startDownload(downloadMode, new DownloaderListener() {
                    @Override
                    public void onSuccess(ResponseDownloader downloader) {
                        LaLog.d("hong--æ–‡ä»¶ä¸‹è½½æˆåŠŸï¼Œä¿å­˜çš„è·¯å¾„ä¸ºï¼š" + downloader.getDownloadPath());
//                            notifyDataSetChanged();//æ›´æ–°UI
                    }

                    @Override
                    public void onFailure(String message) {
                        LaLog.d("hong--ä¸‹è½½å¤±è´¥" + message);
                    }

                    @Override
                    public void onPaused() {
                        LaLog.d("hong--æš‚åœä¸‹è½½");
                    }

                    @Override
                    public void onCanceled() {
                        LaLog.d("hong--å–æ¶ˆä¸‹è½½");
                    }

                    @Override
                    public void onProgress(ResponseDownloader rb) {
                        int progress = rb.getProgress();
                        LaLog.d("hong---æ–‡ä»¶æ­£åœ¨ä¸‹è½½ï¼šprogress" + progress);
//                            notifyItemChanged(rb.getPosition(), 1);//æ›´æ–°UI
                    }
                }, false);
            }

            @Override
            public void unAvailable(String url) {
                LaLog.d("hong--ä¸‹è½½åœ°å€æ— æ•ˆ");
            }
        });
    }
}
```

**ç¬¬2æ­¥ï¼šè°ƒç”¨ä¸‹è½½çš„æ–¹æ³•`preDownload()`å¼€å§‹ä¸‹è½½**

è¿™é‡Œæ¨¡æ‹Ÿä¸¤ä¸ªæŒ‰é’®ç‚¹å‡»äº‹ä»¶

```java
aarButton.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        preDownload(69,"https://api.github.com/download/livery1.2.18.aar");
    }
});
doczipButton.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        preDownload(96,"https://api.github.com/download/livery1.2.18doc.zip");
    }
});
```
å¦‚æœä¸‹è½½çš„æ–‡ä»¶æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œä¹Ÿå¯ä»¥åœ¨adapterè°ƒç”¨`preDownload()`æ–¹æ³•

```java
adapter.setOnItemClickListener((adapter, view, position) -> {
    preDownload(mod.getId(),mod.getDownLoadUrl);
});
```

**ç¬¬3æ­¥ï¼šæ‰“å¼€ä¸‹è½½æ–‡ä»¶**

æ–‡ä»¶ä¸‹è½½æˆåŠŸä»¥åï¼Œä¸€èˆ¬éœ€è¦æ‰“å¼€æ–‡ä»¶ï¼ˆå¦‚æœæ˜¯apkæ–‡ä»¶ï¼Œé…ç½®`ResponseDownloader`è¿˜ä¼šè‡ªåŠ¨å®‰è£…ï¼‰ï¼Œä½†è¿™é‡Œå­˜åœ¨ä¸€ä¸ªå°é—®é¢˜ï¼Œ**å¦‚æœä¸‹è½½çš„æ–‡ä»¶è¢«ç”¨æˆ·åˆ é™¤äº†ï¼Œæ•°æ®åº“è¿˜æ ‡è®°æ­¤idä¸‹è½½çš„å®ŒæˆçŠ¶æ€**ï¼Œé™¤éç”¨æˆ·æ¸…é™¤APPçš„æ•°æ®ï¼Œå¦åˆ™ä»¥åæ­¤idéƒ½æ˜¯å·²ä¸‹è½½æ— æ³•ä¸‹è½½ï¼Œ
å‡ºäºè¿™ä¸ªåœºæ™¯liveryä¸­å¯ä»¥è¿™æ ·å¤„ç†ï¼Œè°ƒç”¨`InternetClient.getInstance().updateFaiure()`å½“æœ€åæ‰“å¼€æ–‡ä»¶çš„æ—¶å€™ï¼Œæ–‡ä»¶ä¸å­˜ï¼ˆurlå’Œidä¸€ä¸€å¯¹åº”ï¼‰ï¼Œåˆ™è¡¨ç¤ºæ–‡ä»¶æŸåï¼Œéœ€è¦é‡æ–°ä¸‹è½½.

```java
String resultFilePath = downloader.getDownloadPath();
if (!TextUtils.isEmpty(resultFilePath)) {
    File resultFile = new File(resultFilePath);
    if (FileUtils.INSTANCE.isFileExists(resultFile)) {
        FasterIntents.launchAppPath(mContext, resultFilePath);//è°ƒç”¨ç³»ç»Ÿappåº”ç”¨æ‰“å¼€æ–‡ä»¶
  } else {
        InternetClient.getInstance().updateFaiure(url, id);//æ–‡ä»¶æŸåï¼Œæ˜¯å¦è¦é‡æ–°ä¸‹è½½
  //notifyItemChanged(mod.getPosition());//æ›´æ–°UI
    }
}
```

**âš ï¸æ³¨æ„**
> * ä¸‹è½½æ˜¯ä¸€ä¸ªè€—æ—¶çš„è¿‡ç¨‹ï¼Œliveryç‹¬ç«‹é…ç½®äº†å¼‚æ­¥ä»»åŠ¡/åå°çº¿ç¨‹ï¼ˆå¯é€‰ï¼‰æ‰§è¡Œä¸‹è½½è¿‡ç¨‹ï¼Œè¿™é‡Œä¸éœ€è¦å†å•ç‹¬å»å¼€å¯ä¸€ä¸ªçº¿ç¨‹.
> * Liveryæ„é€ äº†ä¸€ä¸ªä¸‹è½½æˆåŠŸä»¥åå°†å‰å°serviceå…³é—­ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªä¸‹è½½é€šçŸ¥ï¼ˆé»˜è®¤æ˜¯å…³é—­çš„ï¼‰ï¼Œåªéœ€è¦åœ¨`ResponseDownloader`ä¸­å¼€å¯å³å¯å¯åŠ¨ä¸€ä¸ªé€šçŸ¥åŠŸèƒ½.
> * å»ºè®®åœ¨ä¸‹è½½çš„æ—¶å€™ç»™ä¸€ä¸ªä¸‹è½½æ–‡ä»¶çš„IDï¼Œä¸ç»™idä¹Ÿå¯ä¸‹è½½æ–‡ä»¶.
> * æ–‡ä»¶ä¸‹è½½æˆåŠŸé»˜è®¤ä¿å­˜çš„è·¯å¾„ä¸ºï¼šsdcard/Aliff/ç›¸åº”çš„ç›®å½•æ–‡ä»¶ä¸­.

### 2.å¯é€‰æƒ…æ™¯èƒ½åŠ›æ¼”ç¤º
#### é«˜æ•ˆGIFåŠ è½½
```XML
<com.sunsta.bear.engine.gif.GifImageView
 android:id="@+id/gifImageView"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:src="@mipmap/gif"/>
```
å¾ªç¯æ’­æ”¾
GifImageViewé»˜è®¤æ’­æ”¾ä¸€æ¬¡å°±åœæ­¢äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡GifImageViewè·å–GifDrawableï¼Œç„¶åå†é€šè¿‡GifDrawableè®¾ç½®å¾ªç¯æ’­æ”¾çš„æ¬¡æ•°ï¼Œæˆ–è€…è®¾ç½®æ— é™å¾ªç¯æ’­æ”¾
```JAVA
GifImageView gifImageView = findViewById(R.id.gifImageView);
GifDrawable gifDrawable = (GifDrawable) gifImageView.getDrawable();
gifDrawable.setLoopCount(5); //è®¾ç½®å…·ä½“æ’­æ”¾æ¬¡æ•°
gifDrawable.setLoopCount(0); //è®¾ç½®æ— é™å¾ªç¯æ’­æ”¾
```
ç½‘ç»œå›¾ç‰‡
```JAVA
String url = "https://p6-tt-ipv6.byteimg.com/origin/pgc-image/596f8546221046c2a394ced23120e3d8";
gifImageView.setImageUrl(url);
```
#### æ¼«å¤©é£ç¾½å¼¹å¹•ä½¿

```XML
<com.sunsta.bear.layout.INABarrageView
    android:id="@+id/barrageView"
    android:layout_width="match_parent"
    android:layout_height="300dp"
    android:layout_marginTop="100dp"
    android:background="#FF4081"
    app:anBarrageGravity="center"
    app:anBarrageFloatTime="4000"
    app:anBarrageItemGap="15dp"
    app:anBarrageRowNum="1"
    app:anBarrageSpeed="500"
    app:asBarrageFly="true"
    app:asBarrageeFloat="true" />
```

**æ”¯æŒçš„å±æ€§ï¼ˆä¹Ÿå¯é€šè¿‡Javaä»£ç åŠ¨æ€é…ç½®ï¼‰**

| XMLä¸­å±æ€§ | å«ä¹‰ |
|:-----------|:-----------|
|anBarrageRowNum |//è®¾ç½®å¼¹å¹•æœ‰å¤šå°‘è¡Œï¼Œé»˜è®¤1è¡Œå¼¹å¹•|
|anBarrageRowHeight |//è®¾ç½®å¼¹å¹•çš„é«˜åº¦ï¼Œé»˜è®¤39dpï¼ˆå½“è¦†ç›–å¸ƒå±€æ–‡ä»¶ä¸­çš„é«˜åº¦æ—¶ï¼Œä¼šä½¿ç”¨xmlä¸­çš„å¸ƒå±€é«˜åº¦ï¼‰|
|anBarrageSpeed |//è®¾ç½®å¼¹å¹•çš„æ»šåŠ¨çš„é€Ÿåº¦ ï¼Œé»˜è®¤8000ç§’|
|anBarrageItemGap |//è®¾ç½®å¼¹å¹•ä¸å¼¹å¹•ä¹‹é—´çš„é—´è·ï¼Œé»˜è®¤10dp|
|anBarrageRowGap |//è®¾ç½®å¼¹å¹•ä¸å¼¹å¹•ä¹‹é—´çš„è¡Œè·ï¼Œé»˜è®¤2dp|
|anBarrageMode |//è®¾ç½®å¼¹å¹•çš„å¸ƒå±€æ–¹å¼ï¼Œé»˜è®¤æ­£å¸¸(normal)å¹³å‡(average)|
|anBarrageGravity |//è®¾ç½®å¼¹å¹•å†…å®¹ï¼Œç›¸å¯¹äºå¸ƒå±€INABarrageViewçš„æ–¹å‘ï¼Œ é»˜è®¤defaultï¼Œåˆ™æœ‰å¯èƒ½ä»ä¸Šåˆ°ä¸‹æ˜¾ç¤ºtopä¼˜å…ˆä¸ŠåŠéƒ¨åˆ†åŒºåŸŸï¼Œcenterä¸­é—´åŒºåŸŸï¼Œbottomåº•éƒ¨åŒºåŸŸ|
|anBarrageDuration |// ä¿ç•™å­—æ®µï¼Œä¸å¯ç”¨ï¼Œæˆ–æ— æ•ˆ|
|anBarrageRepeatCount |//è®¾ç½®åŠ¨ç”»é‡å¤çš„æ¬¡æ•°ï¼Œé»˜è®¤0ï¼Œè®¾ç½®ä¸ºï¼šValueAnimator.INFINITE åˆ™è¯¥å¼¹å¹•ä¼šæ— é™å¾ªç¯æ’­æ”¾|
|anBarrageFloatSpeed |//å¼¹å¹•æ‚¬æµ®è¾¹ç¼˜çš„å‘å·¦åºŸé™¤çš„é€Ÿåº¦|
|anBarrageFloatTime |//å¼¹å¹•æ‚¬æµ®è¾¹ç¼˜çš„åœç•™çš„æ—¶é—´|
|anBarrageIdleTime |//é…ç½®å¼¹å¹•çš„ç©ºé—²æ—¶é—´ï¼Œæ³¨æ„ç©ºé—²æ—¶é—´è¦æ¯”ä¸€æ¡å¼¹å¹•çš„åŠ¨ç”»æ—¶é—´é•¿|
|asBarrageeFloat |//å½“å¼¹å¹•æ‚¬æµ®è¾¹ç¼˜,å¼€å¯å‘å¼¹æ€§å‘å·¦é£å‡ºæ•ˆæœ|
|asBarrageAuto |//è®¾ç½®å¼¹å¹•è‡ªåŠ¨æ’­æ”¾ï¼Œé»˜è®¤false|
|asBarrageFly |//è®¾ç½®å¼¹å¹•æ˜¯å¦å¯ä»¥æ¼«å¤©é£ç¾½ï¼Œé»˜è®¤true|
|asKeepSequence |//å½“æ¼«å¤©é£ç¾½æ—¶ï¼Œè®¾ç½®æ˜¯å¦ä¿æŒå…ˆåé¡ºåºï¼Œé»˜è®¤falseè¡¨ç¤ºå¼¹å¹•åœ¨å¸ƒå±€INABarrageViewå†…éšæœºæ²¡æœ‰é¡ºåºçš„ï¼Œä¸åˆ†å…ˆåå‡ºç°ï¼Œtrueè¡¨ç¤ºå¼¹å¹•æ¯æ¬¡æ˜¾ç¤ºä¸€è¡Œï¼Œå½“ç¬¬ä¸€è¡Œæ˜¾ç¤ºå®Œå†æ˜¾ç¤ºç¬¬äºŒè¡Œï¼ˆå½“è®¾ç½®å¼¹å¹•è¡Œæ•°å¤§äº1ï¼ˆè¶…è¿‡é»˜è®¤è¡Œæ•°ï¼‰ï¼Œåˆ™æ¼«å¤©é£ç¾½å…³é—­ï¼‰|
|asBarrageInterpolator |//å¯ç”¨è®¾ç½®å·®å€¼å™¨ï¼Œï¼ˆä¿ç•™å­—æ®µï¼‰åŠ¨ç”»æŒç»­çš„æ—¶é—´ï¼Œä¸åŒå®½åº¦çš„ç‰©ä½“ï¼Œåˆ’è¿‡åŒä¸€ä¸ªçª—å£ï¼Œè§„å®šäº†æ€»æ—¶é—´ï¼Œä»¥æ­¤è·å–å¯¹åº”çš„é€Ÿåº¦|

**æ¼«å¤©é£ç¾½å¼¹å¹•ç‰¹æ•ˆ**

å¼¹å¹•æ˜¾ç¤ºçš„æ ¸å¿ƒæ¥è‡ªLiveryçš„`BarrageDataAdapter`æä¾›ï¼Œæ˜¾ç¤ºä¸€ä¸ª`æ»¡å¤©é£ç¾½å¼¹å¹•`é¦–å…ˆéœ€è¦è·å–`BarrageDataAdapter`å®ä¾‹ï¼Œå¦‚ä¸‹å‚è€ƒï¼š

```java
BarrageDataAdapter mBarrageAdapter = inaBarrageView.obtainBarrageAdapter(this);
```
**ä¸€ä¸ªç®€å•çš„åˆ—å­**
```java
private void showDanMu() {
    Barrage barrage = new Barrage(BarrageDataAdapter.BarrageType.IMAGE_TEXT);
    barrage.setPrimaryIvId(R.drawable.hong);
    barrage.setContent("æ¬¢è¿è¿›å…¥Bgwançš„ç›´æ’­é—´ï¼Œè¯·å¤šå¤šå…³æ³¨å“Ÿ~");
    mBarrageAdapter.addBarrage(barrage);
}
```
Barrageä¼šè¦æ±‚ä¼ å…¥ä¸€ä¸ªtypeå‚æ•°ï¼ˆIMAGE_TEXTå›¾ç‰‡æ–‡å­—ç»„åˆå¼¹å¹•ï¼ŒTEXTçº¯æ–‡å­—å¼¹å¹•ï¼‰

**ä¸€ä¸ªå¤æ‚çš„æ•ˆæœ**

æ¼«å¤©é£ç¾½å¼¹å¹•ä½¿æ”¯æŒè®¸å¤šè‡ªå®šä¹‰å±æ€§ï¼Œæ¯”å¦‚ï¼šå¼¹å¹•çš„layoutï¼Œè‡ªé€‚åº”æ–‡å­—é•¿åº¦ï¼Œå¼¹å¹•èƒŒæ™¯é¢œè‰²ï¼Œå¤´åƒï¼Œç”šè‡³æ˜¯åŠ¨ç”»ï¼ŒåŒ…æ‹¬XMLä¸­çš„æ‰€æœ‰å±æ€§ï¼Œè¿™æ ·å¯ä»¥åŠ ä¸€äº›é€»è¾‘å°±å¯ä»¥åšåˆ°åŠ¨æ€é…ç½®æ¯ä¸ªå¼¹å¹•è¡Œä¸ºï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå¤æ‚çš„å¼¹å¹•.

```java
private void showDanMu2() {
    Barrage barrage = new Barrage(BarrageDataAdapter.BarrageType.IMAGE_TEXT);
    barrage.setGifIvId(R.mipmap.gif1);
    barrage.setGifIvId2(R.mipmap.gif2);
    barrage.setGifIvId3(R.mipmap.gif3);
    barrage.setUserName("sunst0069");
    barrage.setBarrageLayout(R.layout.an_item_barrage);//å¼¹å¹•çš„layoutï¼Œå¯ä»¥è‡ªå®šä¹‰
  barrage.setBackground(R.mipmap.image_select);
    barrage.setContent("äº²çˆ±çš„çƒ­çˆ±çš„è¿›å…¥äº†ä½ çš„æˆ¿é—´");
    barrage.setBarrageFloat(true);
    barrage.setBarrageFloatSpeed(1800L);
//    mBarrageAdapter.addBarrage(barrage);//æ˜¾ç¤ºå¼¹å¹•æ–¹æ³•1ï¼ˆé»˜è®¤ï¼‰
  mBarrageAdapter.addBarrage(barrage, new OnBarrageLayout() {
        @Override
        public View barrageLayout(View layoutView, Barrage barrage) {
            return mBarrageAdapter.loadBarrageData(layoutView, barrage);
        }
    });//æ˜¾ç¤ºå¼¹å¹•æ–¹æ³•2ï¼ˆè¯¥æ•ˆæœå’Œæ–¹æ³•1ç­‰åŒæ•ˆæœï¼‰
}
```
ä¸ºäº†å¢åŠ å¼€å‘è€…æ§åˆ¶æ¯ä¸€æ¡å¼¹å¹•ï¼ˆä¸ç®¡Barrageå±æ€§é‡Œé¢æœ‰å€¼çš„æƒ…å†µï¼‰ï¼Œæä¾›ä»¥ä¸‹æ“ä½œ
```java
mBarrageAdapter.addBarrage(barrage, new OnBarrageLayout() {
    @Override
    public View barrageLayout(View layoutView, Barrage barrage) {
        BarrageItemView barrageItem = mBarrageAdapter.getBarrageItemView(layoutView, barrage);
        //barrageItem.getXXX().setXXX()
        return barrageItem.getConverView();//æ˜¾ç¤ºå¼¹å¹•æ–¹æ³•3ï¼ˆæ¯æ¡å¼¹å¹•å•ç‹¬æ§åˆ¶ï¼‰
  }
});
```
åœ¨éµå¾ª`an_item_barrage.xml`æ§ä»¶å‘½åçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡barrageItemå¯¹è±¡èƒ½å¤Ÿè·å–æ¯ä¸€ä¸ªå¼¹å¹•å¸ƒå±€çš„æ§ä»¶.


**æ¼«å¤©é£ç¾½å¼¹å¹•äº‹ä»¶**

å¼¹å¹•ç‚¹å‡»äº‹ä»¶ï¼š
```java
mBarrageAdapter.setBarrageClickListener(new OnBarrageClickListener() {
    @Override
    public void onClick(Barrage barrage) {
        ToastUtils.s(BarrageActivity.this, "ç‚¹å‡»:" + barrage.getType());
    }
});
```

å¼¹å¹•ç©ºé—²ï¼ˆå¼¹å¹•ç©ºé—²Nmsåå›è°ƒï¼Œåœ¨æ­¤å‡½æ•°è®¾ç½®ç›‘å¬ï¼‰
```java
inaBarrageView.setIdleListener(new OnBarrageIdleListener() {
    @Override
    public void onIdle(long idleTimeMs, INABarrageView view) {
        LaLog.d("hong---å¼¹å¹•ç©ºé—²æ—¶é—´ï¼ŒidleTimeMs = " + idleTimeMs + "view=" + view.toString());
    }
});
```
**âš ï¸ç‰¹åˆ«æ³¨æ„**
> * å¼¹å¹•çš„å±æ€§é€šè¿‡xmlï¼Œjavaï¼ŒBarrageè®¾ç½®ä¼˜å…ˆçº§ï¼šBarrage > java > xmlï¼Œå³Barrageä¸­ä¼˜å…ˆçº§æœ€é«˜.
> * æ¼«å¤©é£å®‡å¼¹å¹•ä½¿åœ¨`livery1.2.0`ä¹‹åå¼€å§‹æ”¯æŒè®¾ç½®**3å¼ Gif**ï¼Œé…åˆè‡ªå®šä¹‰layoutå¯ä»¥å®ç°æ›´å¤šæ›´ç‚«çš„ç‰¹æ•ˆ.
> * **è‡ªå®šä¹‰å¼¹å¹•å¸ƒå±€**æ—¶æ§ä»¶çš„å‘½ååº”ä¸liveryä¸­`an_item_barrage.xml`ä¸€è‡´ï¼Œå¦åˆ™åœ¨è°ƒç”¨`mBarrageAdapter.addBarrage()`ä¸­éœ€è¦ä½ è‡ªå·±å»findViewById()ï¼ˆé™¤éliveryæä¾›çš„ç‰¹æ•ˆä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼‰.

### 3.DEMOæ¼”ç¤º
éƒ¨åˆ†`demo_livery1.2.0.apk`æ•ˆæœå›¾ï¼ŒåŒ…å«äº†liveryæƒ…æ™¯èƒ½åŠ›ï¼Œ**åœ¨æˆ‘çš„çŸ¥ä¹å¯ä»¥è·å–æ›´å¤šå®ç”¨çš„æŠ€å·§.**

åŒ…å«4ä¸ªtabï¼š```1.Livery```æä¾›ï¼Œ```2.é€šç”¨ä¸šåŠ¡```æ¡†æ¶çš„ä½¿ç”¨ï¼Œ```3.è§†é¢‘```å’Œ```4.å…³äº```
  >```1å’Œ2æ¨¡å—```ä¸­æ§ä»¶ç¬¦åˆmaterial designä½†æ˜¯å…·ä½“éœ€è¦æ³¨æ„åªæœ‰æ ‡æ³¨ä¸ºï¼šâ˜€ï¸ è¡¨ç¤ºè¿™ä¸ªæ¨¡å—çš„åŠŸèƒ½ä¸ºå‘è¡Œç‰ˆæœ¬ï¼Œå…¶å®ƒçš„ç¤ºä¾‹ä»£ç ä»…ä¾›å‚è€ƒ.
>```3å’Œ4æ¨¡å—```ç±»ä¼¼è¯¥åŠŸèƒ½ä¸åšå‚è€ƒï¼Œä¸ªäººå½“å‰æµ‹è¯•çš„ä¸€äº›é€»è¾‘æ€§ï¼ŒåŠŸèƒ½æ€§ä»£ç ï¼Œå¦‚è§†é¢‘ç¼–è§£ç ï¼Œè¿™éƒ¨åˆ†ä»£ç ä»…ä¾›å‚è€ƒ.


| ä¸»é¡µHome | åŠ¨ç”»Gif |
|:-----------:|:-----------:|
|
![](https://github.com/qydq/livery/blob/main/image/IMG_HOME.JPG?raw=true)|![](https://github.com/qydq/livery/blob/main/image/IMG_GIF.JPG?raw=true)|

| å¯¼èˆªæ  | å¯¼èˆªæ 1 | å¯¼èˆªæ 2 |
|:-----------:|:--------:|:---------:|
|
![](https://github.com/qydq/livery/blob/main/image/image_navication1.JPG?raw=true) |![](https://github.com/qydq/livery/blob/main/image/image_navication2.JPG?raw=true)|![](https://github.com/qydq/livery/blob/main/image/image_navication3.JPG?raw=true)|
## **æ··æ·†é…ç½®# proguard-rules**
æ··æ·†è§„åˆ™ä¸€å®šè¦çœ‹ï¼š[**Android Appä»£ç æ··æ·†è§£å†³æ–¹æ¡ˆclick**](https://zhuanlan.zhihu.com/p/34559807)
```BASH
#---------------------------4.(åå°„å®ä½“)ä¸ªäººæŒ‡ä»¤åŒº-qyæ™´é›¨ï¼ˆè¯·å…³æ³¨çŸ¥ä¹Bgwanï¼‰---------------------
# livery 1.2.x
-keep class com.sunsta.bear.view.activity.**{*;}
-keep class androidx.support.widget.helper.**{*;}
-keep class com.sunsta.bear.**{*;}
-keep class com.sunsta.livery.**{*;}
-keep class com.sunsta.bear.view.**{*;}
-keep class com.sunsta.bear.view.recyclerview.**{*;}
-keep class com.sunsta.bear.view.activity.**{*;}
-dontwarn com.sunsta.bear.**

-keep class com.sunsta.bear.layout.** { *; }
-dontwarn com.sunsta.bear.layout.ucrop**
-keep class com.sunsta.bear.layout.ucrop** { *; }
-keep interface com.sunsta.bear.layout.ucrop** { *; }

#å†…éƒ¨å†…
-keepclasseswithmembers class com.sunsta.bear.AnConstants$URL {
 <methods>;}
-keepclasseswithmembers class com.sunsta.bear.AnConstants$KEY {
 <methods>;}

-keep public class com.sunsta.bear.engine.gif.GifIOException{<init>(int);}
-keep class com.sunsta.bear.engine.gif.GifInfoHandle{<init>(long,int,int,int);}
```
## **å¸¸è§é”™è¯¯# Easy Mistake**
```xml
./gradlew processDebugManifest --stacktrace
```
### éå¸¸é‡è¦1ï¼š1.1.xç‰ˆæœ¬ç”¨androidxï¼Œæ›¿æ¢æ‰äº†æ‰€æœ‰çš„support-v4,v7åŒ….
ç”±äºè°·æ­Œ`androidç‰ˆæœ¬å¼€å‘åº“`æ›´æ–°å‡çº§ï¼Œ```livery```åœ¨ç‰ˆæœ¬```1.1.x```ä»¥åç”¨```androidx```æ›¿æ¢äº†æ‰€æœ‰çš„```support-v4ï¼Œv7```ç­‰ï¼›

* **å¦‚æœä½ çš„é¡¹ç›®å·²ç»åŒ…å«äº†```v4ï¼Œv7ï¼Œ```å»ºè®®åˆ é™¤è·Ÿ```v4ï¼Œv7```çš„ä¾èµ–**.

* å¦‚ä¸èƒ½åˆ é™¤ï¼Œè¯·é™ä½ä½¿ç”¨`livery1.1.0`ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œæˆ–å‚è€ƒå¦‚ä¸‹é…ç½®.

åœ¨é¡¹ç›®çš„æ ¹ç›®å½•çš„build.gradleä¸­æ·»åŠ ï¼Œè¿™æ ·å°±å¯ä»¥å¿½ç•¥supportç›¸å…³çš„åŒ…å¼•ç”¨é—®é¢˜
```Groovy
 configurations {
  all*.exclude group :'com.android.support',module:'support-compat'
  all*.exclude group :'com.android.support',module:'support-v4'
  all*.exclude group :'com.android.support',module:'support-annotations'
  all*.exclude group :'com.android.support',module:'support-fragment'
  all*.exclude group :'com.android.support',module:'support-core-utils'
  all*.exclude group :'com.android.support',module:'support-core-ui'
 }
```
æˆ–å‚è€ƒï¼š
```Groovy
implementation('me.imid.swipebacklayout.lib:library:1.1.0') {
 exclude group: 'com.android.support'
}
```
### éå¸¸é‡è¦2ï¼š Manifest merger failed : Attribute meta-data#android.support.FILE_PROVIDER_PATHS.
è¿™æ˜¯`FileProvider`å†²çªï¼Œä¿®æ”¹AndroidManifest.xmlæ–‡ä»¶ï¼Œï¼ˆ[**`å‚è€ƒï¼š`**](https://blog.csdn.net/lbqcsdn/article/details/84795775)ï¼‰.
```XML
<provider
 android:name="android.support.v4.content.FileProvider"
 android:authorities="${applicationId}.fileprovider"
 android:exported="false"
 android:grantUriPermissions="true">
 <meta-data
  android:name="android.support.FILE_PROVIDER_PATHS"
  android:resource="@xml/gdt_file_path" />
</provider>

<provider
 android:name=".utils.BuglyFileProvider"
 android:authorities="${applicationId}.fileProvider"
 android:exported="false"
 android:grantUriPermissions="true"
 tools:replace="name,authorities,exported,grantUriPermissions">
 <meta-data
  android:name="android.support.FILE_PROVIDER_PATHS"
  android:resource="@xml/bugly_file_paths"
 tools:replace="name,resource" />
</provider>
```
### éå¸¸é‡è¦3ï¼šThis project uses AndroidX dependencies, but the 'android.useAndroidX' property is not enabled. Set this property to true in the gradle.properties file and retry.
åœ¨ä½ é¡¹ç›®çš„gradle.propertiesé…ç½®æ–‡ä»¶ä¸­åŠ å…¥
```xml
android.useAndroidX=true
```
**å‚è€ƒé…ç½®ï¼š**
```Groovy
org.gradle.jvmargs=-Xmx1536m
# org.gradle.parallel=true
android.useAndroidX=true
# Automatically convert third-party libraries to use AndroidX
android.enableJetifier=true
android.useDeprecatedNdk=true
```
### æ³¨æ„äº‹é¡¹1ï¼šAttribute application@theme value=(@style/AppTheme) from AndroidManifest.xml:11:9-40 is also present at [com.sunsta.livery:livery:1.2.x] AndroidManifest.xml

å³`AndroidManifest``èµ„æºå†²çªï¼Œåœ¨ä½ çš„AndroidManifest.xml applicationæ ‡ç­¾ä¸­æ·»åŠ ï¼ˆæ ¹æ®éœ€è¦æ·»åŠ ï¼‰.
```xml
tools:replace="android:icon,android:theme,android:label,android:allowBackup,android:name"
```
**âš ï¸æç¤º**
>ä¹Ÿå¯ä»¥åˆ é™¤`application`æ ‡ç­¾ä¸­é‡å¤çš„èµ„æºå±æ€§.
### æ³¨æ„äº‹é¡¹2ï¼š More than one file was found with OS independent path 'META-INF/rxjava.properties'
è¿™æ˜¯rxJavaå†²çªï¼Œåœ¨appç›®å½•çš„build.gradleä¸‹æ·»åŠ 
```Groovy
 packagingOptions {
   exclude 'META-INF/rxjava.properties'
 }
```
### [æ›´å¤šï¼šå…¶å®ƒandroidä¸­å¸¸è§é”™è¯¯è§£å†³æ–¹æ³•ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ã€‚](https://github.com/qydq/livery/blob/main/error.md)

## **ç‰ˆæœ¬æ—¥å¿—# Version LOG**
`Livery`æ¡†æ¶AAR`ä¸`åˆå§‹APPæˆ–DEMOç‰ˆæœ¬`æ—¥å¿—è®°å½•

| **ç‰ˆæœ¬** *`(æ—¥æœŸ)`*   |é¡¹ç›®|APK  |AAR`release` |å¤‡æ³¨ï¼ˆç‰ˆæœ¬å¤§å°æ¼”å˜è¯´æ˜ï¼‰ |
| --------                   | ----:|-----:   |-----: |                :---- |
|**~~v0.0.69~~** *`(2018/06/09)`*|#|#|#|`18å¹´`åˆå§‹ç‰ˆæœ¬`é¡¹ç›®H`ä¸º**å°å›¢å­èŠ³å„¿**å¼€å‘çš„ä¸€æ¬¾**èŠå¤©APP**|
|**~~v1.0.1~~** *`(2019/12/31)`*| 180M |   7.5M  | 6.4M  |[æ¨å¹¿å¼•å…¥`livery`é¦–å‘-INATabLayoutä½¿ç”¨æ¡ˆä¾‹](https://zhuanlan.zhihu.com/p/100098139)|
|**~~v1.0.20~~** *`(2020/01/02)`*|255M|13.4M|12.2M|`é¡¹ç›®H`æ–°å¢è§†é¢‘ ,`livery`å¼•å…¥GIFå¼•æ“åŠ¨ç”»;åŠ å…¥äº†å‡ å¼ è¶…å¤§èµ„æºgifå›¾ï¼Œè¿™æ˜¯é€ æˆAPKï¼ŒAARä½“ç§¯å˜å¤§çš„ç›´æ¥åŸå› |
|**v1.1.10** *`(2020/03/26)`*|259M|16M|2M|æ–°æä¾›`é¡¹ç›®D`å¼•å…¥videobeauty,xmediac,xrecord**è§†é¢‘å½•åˆ¶**å‹ç¼©ä¸Šä¼ **Cè¯­è¨€**åŠŸèƒ½;`livery`å¼•å…¥å¯¼èˆªæ ï¼Œæä¾›MDçš„UIè®¾è®¡é£æ ¼ï¼Œç§»é™¤è¶…å¤§èµ„æºGIFå›¾ï¼Œè¿™ä¹Ÿæ˜¯AARä½“ç§¯å‡å°çš„ç›´æ¥åŸå› |
|**v1.1.111** *`(2020/12/30)`*|240M|17.1M|603KB|`livery`é’ˆå¯¹èµ„æºæ–‡ä»¶è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œç§»é™¤å¤§é‡çš„å¸ƒå±€èµ„æºå’Œä¸€äº›éå¿…é¡»çš„èµ„æºæ–‡ä»¶ï¼Œè¿›è¡Œç»Ÿä¸€åˆ†ç±»ï¼Œ**è§†é¢‘æ¨¡å—æµ‹è¯•ä»£ç æ”¾å¼€**ï¼Œä¿®å¤å·²çŸ¥é—®é¢˜ï¼›**å¹¶ä¸”å¼•å…¥**äº†`æ¼«å¤©é£ç¾½å¼¹å¹•ä½¿`ï¼ŒAARçš„ä½“ç§¯æ²¡å¢åŠ å´å†æ¬¡å‡å°åˆ°566KB;`é¡¹ç›®D`å®Œæˆ`æ¼«å¤©é£ç¾½å¼¹å¹•ä½¿`**ä½¿ç”¨æ¡ˆä¾‹**|
|**v1.2.0** *`(2020/06/03)`*| 230M |  17.1M   | 586KB | 1.2.0ç‰ˆæœ¬å¼€å§‹æ”¯æŒ**æ¶æ„ä¼ä¸šçº§**åº”ç”¨ï¼Œå›½é™…åŒ–æ”¯æŒ`(ç®€ä½“ä¸­æ–‡rCNï¼Œç¹ä½“ä¸­æ–‡rTWï¼Œè‹±æ–‡enï¼Œå¾·è¯­deï¼Œæ—¥æ–‡jaï¼Œè‘¡è„ç‰™pt)`ï¼Œ**è§†é¢‘æ¨¡å—æµ‹è¯•ä»£ç å…³é—­**ï¼Œä¿®å¤äº†å·²çŸ¥é—®é¢˜|

**âš ï¸è¯´æ˜**
* åˆå§‹`APP0.0.69`ä¸ºå°å›¢å­å¼€å‘çš„èŠå¤©é¡¹ç›®ï¼ˆç§°ä¸º`Hong`ï¼‰,ä¹Ÿæ˜¯é¡¹ç›®çš„çµæ„Ÿæ¥æº.
* æœ¬liveryï¼ˆç§°ä¸º`é¡¹ç›®D`ï¼‰ä¸º`liveryæ¡†æ¶`æä¾›çš„DEMOï¼Œæ–¹ä¾¿å¼€å‘è€…å¿«é€Ÿé›†æˆliveryçš„ç¤ºä¾‹.
* è¡¨æ ¼ä¸­ç‰ˆæœ¬ä»¥æ­¤ç±»æ¨ï¼Œå¦‚ï¼š`(1.0.1-1.0.20)`ä¸ºä¸€ç»„è¡¨ç¤º`1.0.x`å‘è¡Œäº†`20`ä¸ªç‰ˆæœ¬ï¼Œ`1.0.1`ä¸º**èµ·å§‹ç‰ˆæœ¬**,`1.0.20`ä¸º**æœ€é«˜ç‰ˆæœ¬**ï¼ŒåŒæ—¶~~åˆ é™¤çº¿~~è¡¨ç¤ºæ­¤ç‰ˆæœ¬åºŸå¼ƒ.
### 1.Livery AAR frameworkè®°å½•

* [**an-aw-base0.x.xç‰ˆæœ¬log.**](https://github.com/qydq/an-aw-base/releases)
* [**ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹æ—§ç‰ˆæœ¬1.0.xæ—¥å¿—è®°å½•log.**](https://github.com/qydq/livery/blob/main/old_alidd_1.0.x.md)
* [**ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹æ—§ç‰ˆæœ¬1.1.xæ—¥å¿—è®°å½•log.**](https://github.com/qydq/livery/blob/main/old_livery_1.1.x.md)

**âš ï¸æ³¨æ„**
>ä»£ç æäº¤ä¸¥æ ¼è·Ÿéšæ—¥å¿—å†…å®¹ï¼Œæ–¹ä¾¿æ—¥åæŸ¥é˜…ç›¸å…³è®°å½•ï¼Œä¸ºæ§åˆ¶å­—æ•°ï¼›è¿™é‡Œåªè®°å½•Liveryç‰ˆæœ¬æ—¥å¿—æ€»è¿°ï¼ˆå¯ä»¥ç‚¹å‡»ä»¥ä¸Šæ—§ç‰ˆæœ¬logäº†è§£è¯¦ç»†ï¼‰å’Œ1.1.8ä¹‹åçš„é‡è¦ç‰ˆæœ¬è®°å½•.

### 2.Livery DEMO apkä¸‹è½½åŠå…¶è¯´æ˜
&#8194;&#8194;[å†å²ç‰ˆæœ¬(demo_livery1.1.11.apk)](https://github.com/qydq/alidd-samples/raw/master/apk/demo_livery1.1.11.apk)

&#8194;&#8194;[å†å²ç‰ˆæœ¬(demo_livery1.1.13.apk)](https://github.com/qydq/alidd-samples/raw/master/apk/demo_livery1.1.13.apk)

&#8194;&#8194;[æœ€æ–°ç‰ˆæœ¬(demo_livery1.2.x.apk)](https://github.com/qydq/livery/blob/main/demo/demo_livery.apk)

**âš ï¸æ³¨æ„**
>ä¸ºäº†ç¯‡å¹…è¿™é‡Œåªè®°å½•äº†æœ€è¿‘**å½“å‰ä¸‰ä¸ªç‰ˆæœ¬**ï¼Œå¦‚è¦å®‰è£…å…¶å®ƒå†å²ç‰ˆæœ¬ï¼Œè¯·æŸ¥çœ‹**æ—§ç‰ˆæœ¬1.x.xæ—¥å¿—è®°å½•**æ—¥å¿—è®°å½•.

### ~~1.0.xç‰ˆæœ¬æ€»è¿° ~~
`livery`çš„**å‘è¡Œç‰ˆæœ¬**ï¼Œä»åŸºç¡€çš„an-baseä»“åº“([#åŸanæ¡†æ¶](https://github.com/qydq/an-aw-base))é‡æ„è€Œæ¥ï¼Œliveryæ¡†æ¶1.0.xï¼ˆåŠä»¥ä¸‹çš„ç‰ˆæœ¬ï¼‰æ”¯æŒçš„androidæœ€ä½ç‰ˆæœ¬ä¸º`minSdkVersion=19`ï¼Œæ€»å…±å‘è¡Œäº†`20ä¸ªå®é™…ç‰ˆæœ¬`ï¼Œä¾èµ–æ–¹æ³•å¦‚ä¸‹ï¼š
```Groovy
implementation 'com.sunsta:livery:1.0.x'
```

1.0.xåŒ…å«åŒ…å«äº†supportç³»åˆ—çš„åº“
```Groovy
appcompat : 'com.android.support:appcompat-v7:27.0.2',
constraint: 'com.android.support.constraint:constraint-layout:1.0.2',
design : 'com.android.support:design:27.0.2',
recyclerview : 'com.android.support:recyclerview-v7:27.0.2',

retrofit  : 'com.squareup.retrofit2:retrofit:2.3.0',
gson: 'com.squareup.retrofit2:converter-gson:2.1.0',
rxjava2: 'com.squareup.retrofit2:adapter-rxjava2:2.3.0',
okhttp : 'com.squareup.okhttp3:okhttp:3.8.1',
glide  : 'com.github.bumptech.glide:glide:4.3.1',

xutils : 'org.xutils:xutils:3.5.0',
glidecompiler: 'com.github.bumptech.glide:compiler:4.3.1',
multipleimageselect: 'com.darsh.multipleimageselect:multipleimageselect:1.0.4',
crop: 'com.soundcloud.android.crop:lib_crop:1.0.0',
advancedluban: 'me.shaohui.advancedluban:library:1.3.2',
nineoldandroids : 'com.nineoldandroids:library:2.4.0',
```
### ~~1.1.xç‰ˆæœ¬æ€»è¿° ~~
**`1.1.x`ç›¸æ¯”`1.0.x`ç‰ˆæœ¬ï¼Œä¸å†æ”¯æŒ`supportåŒ…`ï¼Œä¸ºäº†æ§åˆ¶æ€§èƒ½ï¼Œæœ€ä½ç‰ˆæœ¬`minSdkVersion=21`ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ`livery1.1.x`ä¸æ”¯æŒ`android5.0`ä»¥ä¸‹çš„ç³»ç»Ÿé›†æˆ**  .

  **âš ï¸ç‰¹åˆ«æ³¨æ„ï¼ˆè®°å½•å†…å®¹ï¼‰**
* 1.1.xç‰ˆæœ¬ä¸»è¦æ˜¯æ·»åŠ androidxï¼Œç§»é™¤å‡çº§ä¿®å¤å‡å°ä½“ç§¯ï¼Œç›¸å…³ç¬¬ä¸‰æ–¹åº“bugï¼Œå®Œå–„**ç¨³å®šç½‘ç»œè¯·æ±‚**ï¼Œä¿®æ”¹æœ€ä½æ”¯æŒç‰ˆæœ¬ä¸º21ï¼Œä¹Ÿå°±æ˜¯è¯´liveryåœ¨ä»¥åä¸å†æ”¯æŒandroid5.0ä»¥ä¸‹çš„æ‰‹æœº.
* æ‰€æœ‰çš„æ§ä»¶ä½¿ç”¨å‡ä¸æ”¯æŒsupport.v4,v7è¿™æ ·çš„åŒ…(åŒ…å«å¦‚RecyclerViewç­‰ç­‰)ï¼Œä»£æ›¿çš„æ˜¯androidxæœ€æ–°çš„åº“.
* ä¼˜åŒ–å’Œç§»é™¤takePhotoæ¨¡å—ä¾èµ–çš„ç¼–è¯‘åº“ï¼Œå› ä¸ºä¸€äº›ç¬¬ä¸‰æ–¹åº“é•¿ä¹…ä¸æ›´æ–°ï¼Œä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œä¸¥é‡çš„å¯èƒ½å‡ºç°å´©æºƒï¼Œï¼ˆå¦‚multipleimageselect è¯¥åº“çš„ä½œè€…æœªæ›´æ–°ï¼Œå¯¼è‡´æ›´æ–°glideåï¼Œåœ¨android8.0 ,9.0ä¸Šå­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼‰.
* å¼•å…¥**androidx.camera**çš„æµ‹è¯•ç‰ˆæœ¬ï¼Œï¼ˆæ­¤ç‰ˆæœ¬å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œå¦‚éœ€å¼•ç”¨androidx.cameraç‰¹æ€§ï¼Œä¾èµ–1.1.xç‰ˆæœ¬å¹¶åŒæ—¶ä¿®æ”¹minSdkVersion=21ï¼‰ä¼˜åŒ–å¹¶ä¸”**ç»Ÿä¸€æ¡†æ¶ä¸­çš„èµ„æºå‘½å**è§„èŒƒé—®é¢˜ï¼Œæ¶‰åŠåˆ°å­—ç¬¦ä¸²ï¼Œé¢œè‰²èµ„æºï¼Œå±æ€§å®šä¹‰ï¼Œå¸ƒå±€æ–‡ä»¶ï¼Œç±»æ–‡ä»¶æ ‡å‡†å‘½åç­‰ç­‰.
```
api "androidx.concurrent:concurrent-futures:1.0.0-rc01"
api "androidx.camera:camera-lifecycle:1.0.0-alpha01"
api "androidx.camera:camera-core:1.0.0-alpha08"
api "androidx.camera:camera-camera2:1.0.0-alpha05"
```
**å…·ä½“ä¾èµ–æ–¹æ³•å¦‚ä¸‹ç±»ä¼¼**
```Groovy
implementation 'com.sunsta:livery:1.1.x'
```
### ~~1.2.xç‰ˆæœ¬æ€»è¿° ~~
æœ¬ç¯‡å†…å®¹å³ä¸ºLivery1.2.xçš„å‘è¡Œä¸­æ–‡å¸®åŠ©æ–‡æ¡£æ€»è¿°.

## **å…¶å®ƒè¯´æ˜# More**
### å…³äºè‡ªå®šä¹‰apkåè¯´æ˜

```Groovy
#---------------------------3.(è‡ªå®šä¹‰apk)ä¸ªäººå…¶å®ƒè¯´æ˜åŒº-sunstï¼ˆè¯·å…³æ³¨çŸ¥ä¹Bgwanï¼‰---------------------
// ä¾¿åˆ©æ‰€æœ‰çš„Variantsï¼Œallæ˜¯è¿­ä»£éå†æ“ä½œç¬¦ï¼Œç›¸å½“äºfor
applicationVariants.all { variant ->// éå†å¾—å‡ºæ‰€æœ‰çš„variant
 variant.outputs.all {// éå†æ‰€æœ‰çš„è¾“å‡ºç±»å‹ï¼Œä¸€èˆ¬æ˜¯debugå’Œreplease
  // å®šä¹‰apkçš„åå­—ï¼Œæ‹¼æ¥variantçš„ç‰ˆæœ¬å·
  def apkName = "app_${variant.versionName}"
  // åˆ¤æ–­æ˜¯å¦ä¸ºç©º
  if (!variant.flavorName.isEmpty()) {
apkName += "_${variant.flavorName}"
  }
  // èµ‹å€¼å±æ€§
  String time = new Date().format("_YYYYMMddHH")
  if (variant.buildType.name.equals("release")){
outputFileName = apkName + "_Replease" + time + ".apk"
  }else {
outputFileName = apkName + "_Debug" +time + ".apk"
  }

 }
}
```
### å…³äºåº”ç”¨å†…apkè‡ªåŠ¨å®‰è£…è¯´æ˜

```Groovy
#---------------------------4.(åº”ç”¨å†…apkå®‰è£…)ä¸ªäººå…¶å®ƒè¯´æ˜åŒº-sunstï¼ˆè¯·å…³æ³¨çŸ¥ä¹Bgwanï¼‰---------------------
private Intent getInstallIntent() {
String fileName = savePath + appName + ".apk";
Uri uri = null;
Intent intent = new Intent(Intent.ACTION_VIEW);
try {
if (Build.VERSION.SDK_INT >= 24) {//7.0 Android N
//com.xxx.xxx.fileproviderä¸ºä¸Šè¿°manifestä¸­provideræ‰€é…ç½®ç›¸åŒ
uri = FileProvider.getUriForFile(mContext, "ä½ è‡ªå·±çš„åŒ…å.fileprovider", new File(fileName));

intent.setAction(Intent.ACTION_INSTALL_PACKAGE);
intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);//7.0ä»¥åï¼Œç³»ç»Ÿè¦æ±‚æˆäºˆä¸´æ—¶uriè¯»å–æƒé™ï¼Œå®‰è£…å®Œæ¯•ä»¥åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ”¶å›æƒé™ï¼Œè¯¥è¿‡ç¨‹æ²¡æœ‰ç”¨æˆ·äº¤äº’
} else {//7.0ä»¥ä¸‹
uri = Uri.fromFile(new File(fileName));
intent.setAction(Intent.ACTION_VIEW);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
}
intent.setDataAndType(uri, "application/vnd.android.package-archive");
startActivity(intent);
return intent;
} catch (IllegalArgumentException e) {
e.printStackTrace();
} catch (ActivityNotFoundException e) {
e.printStackTrace();
} catch (Exception e) {
e.printStackTrace();
}
return intent;
}
```

## **è‡´è°¢**
éå¸¸æ„Ÿè°¢ä»¥ä¸‹å‰è¾ˆï¼ˆorå¼€æºç»„ç»‡æœºæ„ï¼‰çš„å¼€æºç²¾ç¥ï¼Œå½“ä»£äº’è”ç½‘çš„å‘å±•ç¦»ä¸å¼€å‰è¾ˆä»¬çš„åˆ†äº«ï¼ŒLiveryçš„æˆåŠŸå‘å¸ƒä¹Ÿæ˜¯.  <br/>   å†æ¬¡æ„Ÿè°¢ğŸ™ã€‚æœ€åæ„Ÿè°¢ä¼˜ç§€çš„[Github](https://github.com)ä»£ç ç®¡ç†å¹³å°ï¼ˆæ’åä¸åˆ†å…ˆåï¼‰ .
- [x] [è‡´æ•¬ä¸ç¼…æ€€-é›·éœ„éª…å‰è¾ˆ](https://blog.csdn.net/leixiaohua1020 "é›·éœ„éª…")
- [x] [yalantis](https://www.runoob.com/w3cnote/android-ui-framework.html)
- [ ] [darsh2](https://github.com/darsh2/MultipleImageSelect)
- [x] [LuckSiege](https://github.com/LuckSiege/PictureSelector)
- [ ] [crazycodeboy](https://github.com/crazycodeboy/TakePhoto)
- [x] [ReactiveX RxAndroid](https://github.com/ReactiveX/RxAndroid)
- [x] [ReactiveX RxJava](https://github.com/ReactiveX/RxJava)
- [x] [squareup retrofit](//20191128)
- [x] [squareup gson](//20191128)
- [x] [squareup retrofit2 adapter-rxjava2](//20191128)
- [x] [bumptech glide](https://github.com/bumptech/glide)
- [x] [ç½—å‡é˜³](https://blog.csdn.net/Luoshengyang "ç½—å‡é˜³")
- [x] [**éƒ­éœ–**](https://blog.csdn.net/sinyu890807 "guolin")
- [x] [ä¸¥æŒ¯æ°](https://blog.csdn.net/yanzhenjie1003 "ä¸¥æŒ¯æ°")
- [x] [å¼ é¸¿æ´‹_](https://blog.csdn.net/lmj623565791 "é¸¿æ´‹_")
- [ ] [ä¸€ç‰‡æ«å¶](https://blog.csdn.net/qq_23547831 "ä¸€ç‰‡æ«å¶_åˆ˜è¶…")

## **LICENSE**
***[ç‰ˆæƒå£°æ˜Â©ï¸](https://zhuanlan.zhihu.com/p/80668416)***

```java
/*
 * Copyright (C) 2016 The Android Developer sunst0069
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
```